{"version":3,"file":"464.bundle.1.0.13.js","mappings":"uKAUOA,eAAeC,IAElB,IAGI,MAAMC,EAA4BC,SAASC,cACvC,0BAGEC,QAAiB,IAAAC,qBAAmB,IAAAC,WAAU,gBAEpD,IAAIF,EAASG,QA+BT,YALA,KAAQC,MAAM,CACVC,QAAS,6CAA+CL,EAASK,QACjEC,UAAW,qBACXC,MAAO,CAAC,IA7BM,EAClB,QAAuBP,EAASQ,KAAM,YACtC,MAAMC,EAAcX,SAASC,cAAc,wBAGvCU,EACAA,EAAYC,iBAAiB,UAAUf,eAAgBgB,IACnD,QAAiBA,EAAO,oEACxB,MAAMC,GAAc,WACpB,QAAgBf,EAA2Be,EAC/C,IAGA,KAAQC,QAAQ,CACZR,QAAS,iCACTC,UAAW,0BAGnB,MAAMM,GAAc,WACpB,QAAgBf,EAA2Be,IAC3C,QAAgBf,EAA2Be,GAC3C,MAAME,EAAoBhB,SAASC,cAAc,0CAC7Ce,GAAmBA,EAAkBJ,iBAAiB,SAAS,YAC/D,QAA0BE,EAC9B,GACJ,CASJ,CAAE,MAAOR,GACL,KAAQA,MAAM,CACVC,QAAS,6BAA+BD,EAAMC,QAC9CC,UAAW,mBACXC,MAAO,CAAC,GAEhB,CACJ,C","sources":["webpack://worldify/./src/modules/pages/app/Visa/upload_page.js"],"sourcesContent":["//import { renderDocuments, handleUploadedDocuments, handleFileInputChange, handleUpload }\nimport { getCookie, displayUser, redirectToLogin, resetPassword, emailReset, getAccountSettings, deleteCookie } from \"../../../auth.js\";\nimport { autoSaveFunction, debounce, fillFieldsFromDatabase, setupForm } from \"../../../form_handling\";\nimport { handleDocuments, handleFileInputChange, handleUpload, hideFilePreview, renderDocuments, updateDocuments, updateVisaRelocationCity } from \"../../../upload_files.js\";\nimport { logging,downloadAllFilesSubmodule, setQueryParam, getQueryParam, reloadPage } from  \"../../../utils.js\";\n\n/**\n * Renders the upload page for visa modules, including document lists and form settings.\n * Handles dynamic content based on user account settings and interaction with the page.\n */\nexport async function render() {\n\n    try {\n\n        // Select the parent elements for document rendering\n        const parentElementDocumentList = document.querySelector(\n            '[w-el=\"document_list\"]'\n          );\n\n        const response = await getAccountSettings(getCookie('wized_token'));\n\n        if (response.success) {\n            fillFieldsFromDatabase(response.user, 'account_');\n            const formWrapper = document.querySelector('[w-el=\"formWrapper\"]');\n            \n\n            if (formWrapper) {\n                formWrapper.addEventListener('change', async function (event) {\n                    autoSaveFunction(event, `${BASE_URL}/account_settings`);\n                    const submoduleId = updateVisaRelocationCity();\n                    updateDocuments(parentElementDocumentList, submoduleId);\n                });\n\n            } else {\n                logging.warning({\n                    message: 'render: Form wrapper not found',\n                    eventName: 'render_no_formWrapper',\n                });\n            }\n            const submoduleId = updateVisaRelocationCity();\n            updateDocuments(parentElementDocumentList, submoduleId);\n            handleDocuments(parentElementDocumentList, submoduleId);\n            const downloadAllButton = document.querySelector('[w-el=\"document_uploaded_downloadAll\"]');\n            if (downloadAllButton){downloadAllButton.addEventListener('click', function () {\n                downloadAllFilesSubmodule(submoduleId);\n            })};\n        } else {\n            logging.error({\n                message: 'render: Failed to fetch account settings: ' + response.message,\n                eventName: 'render_fetch_error',\n                extra: {}\n            });\n            return;\n        }\n\n    } catch (error) {\n        logging.error({\n            message: 'Error in render function: ' + error.message,\n            eventName: 'render_exception',\n            extra: {}\n        });\n    }\n}\n\n\n"],"names":["async","render","parentElementDocumentList","document","querySelector","response","getAccountSettings","getCookie","success","error","message","eventName","extra","user","formWrapper","addEventListener","event","submoduleId","warning","downloadAllButton"],"sourceRoot":""}