"use strict";(self.webpackChunkworldify=self.webpackChunkworldify||[]).push([[604],{604:(e,s,a)=>{a.r(s),a.d(s,{render:()=>i});var n=a(401),t=a(338),r=a(797);function i(){try{(0,t.EV)("signup_form",null,null,o,c,u,!1)}catch(e){r.PW.error({message:"Error initializing signup form: "+e.message,eventName:"signup_initialization_error",extra:{}})}}function o(e){const s=new FormData;return s.append("email",e.get("signup_email")),s.append("password",e.get("signup_password")),s.append("confirmPassword",e.get("signup_confirmPassword")),s}async function c(e){const s=e.get("email"),a=e.get("password"),n=e.get("confirmPassword");if(!s||!a||!n)return{success:!1,message:"Email, password and password confirmation are required."};if(a.length<7||a.length>30)return{success:!1,message:"The password needs to be between 7 and 30 characters."};if(!/[A-Z]/.test(a))return{success:!1,message:"The password needs to contain at least one uppercase letter."};if(!/[a-z]/.test(a))return{success:!1,message:"The password needs to contain at least one lowercase letter."};if(!/[0-9]/.test(a))return{success:!1,message:"The password needs to contain at least one number."};if(!/[!@#$%^&*(),.?":{}|<>]/.test(a))return{success:!1,message:"The password needs to contain at least one special character."};if(a!==n)return{success:!1,message:"The passwords do not match."};const t=new FormData;t.append("email",e.get("email")),t.append("password",e.get("password"));try{const e=await fetch("https://xfa3-mghj-yd9n.n7c.xano.io/api:xhKh0vlR/auth/signup",{method:"POST",body:t,headers:{}}),s=await e.json();if(e.ok)return r.PW.info({message:"Signup request successful",eventName:"signup_success",extra:{}}),{success:!0,message:"Signup successful.",authToken:s.authToken};{const e=s.message||"Signup failed due to unknown error";return r.PW.error({message:`Signup request failed: ${e}`,eventName:"signup_failed",extra:{}}),{success:!1,message:e}}}catch(e){return r.PW.error({message:"Error during signup process: "+e.message,eventName:"signup_process_error",extra:{}}),{success:!1,message:e.message||"Error occurred during the signup process"}}}async function u(e){const s=document.getElementById("signup_form"),a=s?s.parentNode.querySelector('[w-el="form_success"]'):null;if(e.success)try{(0,n.setCookie)(n.TOKEN_KEY,e.authToken),s&&a&&(s.classList.add("hide"),a.style.display="block");const t=await(0,n.checkAuthentication)();t.success?await(0,n.sendVerificationMail)(t.user.email,"email_verification","https://www.getworldify.com/account/onboarding"):r.PW.warning({message:"Authentication check failed after signup",eventName:"post_signup_auth_check_failed",extra:{}})}catch(e){r.PW.error({message:"Error in post-signup actions"+e.message,eventName:"post_signup_actions_error",extra:{}})}else r.PW.warning({message:"Signup failed: "+e.message,eventName:"user_signup_failed",extra:{}})}}}]);
//# sourceMappingURL=604.bundle.1.0.14.js.map