"use strict";(self.webpackChunkworldify=self.webpackChunkworldify||[]).push([[948],{948:(e,n,r)=>{r.r(n),r.d(n,{render:()=>s});var o=r(797);const{getCookie:t}=r(401);async function s(){try{await a(),document.querySelector('[w-el="before_you_move_list"]').addEventListener("click",(async function(e){const n=e.target.closest('[w-el="module_pinButton"]');if(n){const e=n.closest('[w-el="module_item"]');if(e&&e.id)try{await async function(e){const n=`Bearer ${t("wized_token")}`,r=new FormData;r.append("module_id",e);try{const t=await fetch("https://xfa3-mghj-yd9n.n7c.xano.io/api:ghdeJJTr/modules/utils/pin_module",{method:"POST",headers:{Authorization:n},body:r}),s=await t.json();return t.ok?(o.PW.info({message:"Module pinned successfully. Module_id: "+e,eventName:"pinModule_success",extra:{}}),s):(o.PW.error({message:`Failed to pin module (${e}): ${t.status} - ${t.statusText}`,eventName:"pinModule_failure",extra:{}}),null)}catch(n){return o.PW.error({message:"Error during pinModule. Module_id: "+e,eventName:"pinModule_error",extra:{}}),null}}(e.id),await a()}catch(e){o.PW.error({message:"Error during module pinning: "+m+e.message,eventName:"module_pinning_error",extra:{}})}}}))}catch(e){o.PW.error({message:"Error during rendering dashboard: "+e.message,eventName:"dashboard_render_error",extra:{}})}}async function a(){try{const e={"Before you move":document.querySelector('[w-el="before_you_move_list"]'),"1-3 months in Germany":document.querySelector('[w-el="1_3_months_list"]')},n=await async function(){const e=`Bearer ${t("wized_token")}`;try{const n=await fetch("https://xfa3-mghj-yd9n.n7c.xano.io/api:ghdeJJTr/modules",{method:"GET",headers:{Authorization:e}}),r=await n.json();return n.ok?r:(o.PW.error({message:`Failed to fetch modules: ${n.status} - ${n.statusText}`,eventName:"getModules_failure",extra:{}}),null)}catch(e){return o.PW.error({message:"Error during getModules: "+e.message,eventName:"getModules_error",extra:{}}),null}}();if(!n)return void o.PW.error({message:"No data returned from getModules",eventName:"renderDashboard_getModules_no_data"});Object.keys(e).forEach((n=>{!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(e[n])})),Object.keys(e).forEach((r=>{const o=function(e,n){return e.filter((e=>e.module_category===n)).sort(((e,n)=>e.order-n.order))}(n,r);!function(e,n){const r={pinned:[],normal:[],completed:[]};n.forEach((e=>{const n=function(e){let n,r="",o="",t="Open Task",s="";switch(e.is_pinned?r="is-pinned":e.is_completed&&(o="is-completed",t="Completed",r="hide"),"coming soon"===e.status&&(s="is-coming-soon",t="Coming soon"),e.module_category){case"Before you move":n="background-color-light-blue";break;case"1-3 months in Germany":n="background-color-light-pink";break;case"First year in Germany":n="background-color-light-green";break;case"Life in Germany":n="background-color-light-orange"}return`\n    <div w-el="module_item" id=${e.id} class="card is-no-margin is-hover">\n  <div class="task-item ${s}">\n    <div class="task_progress-color-wrapper ${s}">\n      <div class="task_progress-color ${n} ${o} ${s}"></div>\n    </div>\n    <div class="task_meta-wrapper">\n      <div w-el="module_pinButton" class="pin-button">\n        <div class="pin-button_icon w-embed ${r}">\n          <svg\n            width="74"\n            height="74"\n            viewBox="0 0 74 74"\n            fill="none"\n            xmlns="http://www.w3.org/2000/svg"\n          >\n            <path\n              d="M19.6866 53.3504L21.1008 51.9362L19.6866 50.522L6.38494 37.2203C5.57291 36.4083 5.29235 35.6333 5.28076 35.0128C5.2693 34.4017 5.513 33.6921 6.22866 32.9764C10.6477 28.5574 19.2996 27.1345 28.1763 31.2918L29.3518 31.8423L30.3334 30.9928L42.402 20.5469L43.3574 19.72L43.021 18.5021C41.4916 12.9662 40.9287 8.01808 41.2424 5.48661C41.394 4.34834 41.7859 3.66432 42.1421 3.30805C42.5181 2.93204 42.9181 2.8003 43.2936 2.81512C43.6811 2.83041 44.2172 3.01213 44.7901 3.58504L71.0001 29.795C71.5566 30.3516 71.7439 30.8886 71.7609 31.2881C71.7773 31.675 71.6438 32.0759 71.2769 32.4428C70.9434 32.7763 70.2533 33.161 69.0741 33.3181C66.5427 33.6319 61.5944 33.0689 56.0583 31.5394L54.8404 31.203L54.0135 32.1584L43.5676 44.2271L42.7182 45.2087L43.2687 46.3842C47.4259 55.2608 46.003 63.9128 41.584 68.3318C40.8683 69.0475 40.1587 69.2911 39.5476 69.2798C38.9271 69.2681 38.1522 68.9876 37.3402 68.1756L24.0385 54.8739L22.6243 53.4597L21.2101 54.8739L9.75649 66.3275C8.0822 68.0017 6.19501 69.1886 4.67968 69.8839C5.37073 68.3679 6.55726 66.4798 8.23303 64.804L19.6866 53.3504Z"\n              fill="currentColor"\n              stroke="black"\n              stroke-width="4"\n            ></path>\n          </svg>\n        </div>\n      </div>\n      <a w-el="module_link" href="${e.module_link}" class="open-task-button w-inline-block ${s}"\n        ><div class="task_open-text">${t}</div>\n        <div class="icon-embed-xsmall w-embed">\n          <svg\n            width="15"\n            height="15"\n            viewBox="0 0 15 15"\n            fill="none"\n            xmlns="http://www.w3.org/2000/svg"\n          >\n            <path\n              d="M14.5931 0.983396C14.5753 0.4314 14.1133 -0.00160407 13.5613 0.0162529L4.56602 0.307258C4.01402 0.325115 3.58102 0.787073 3.59887 1.33907C3.61673 1.89106 4.07869 2.32407 4.63068 2.30621L12.6265 2.04754L12.8852 10.0434C12.903 10.5954 13.365 11.0284 13.917 11.0105C14.469 10.9926 14.902 10.5307 14.8841 9.97869L14.5931 0.983396ZM2.16725 14.6684L14.3232 1.6996L12.864 0.331856L0.708052 13.3007L2.16725 14.6684Z"\n              fill="currentColor"\n            ></path>\n          </svg></div\n      ></a>\n    </div>\n    <a\n      w-el="module_link"\n      href="${e.module_link}"\n      class="task_header-wrapper w-inline-block"\n      ><h3 w-el="module_title" class="heading-style-h6">${e.module_title}</h3>\n      <div class="spacer-small"></div>\n    </a>\n  </div>\n</div>\n`}(e),o=e.is_completed?"completed":e.is_pinned?"pinned":"normal";r[o].push(n)})),["pinned","normal","completed"].forEach((n=>{r[n].forEach((n=>{e.innerHTML+=n}))}))}(e[r],o)}))}catch(e){o.PW.error({message:"Error during renderDashboard: "+e.message,eventName:"renderDashboard_error",extra:{}})}}}}]);
//# sourceMappingURL=948.bundle.1.0.13.js.map